<div>
    <h1>Record permission requests</h1>
    <div *ngIf="recordPermissionRequests | async as catalog; else loading">
        <ng-container *ngIf="catalog.length; else noItems">
            <table mat-table [dataSource]="(recordPermissionRequests | async | recordPermissionsRequested)">
                <ng-container matColumnDef="request_from">
                    <th mat-header-cell *matHeaderCellDef>Requestor</th>
                    <td mat-cell *matCellDef="let recordPermissionRequest">
                        <p>{{ recordPermissionRequest.request_from.name }}</p>
                    </td>
                </ng-container>
                <ng-container matColumnDef="record">
                    <th mat-header-cell *matHeaderCellDef>Record</th>
                    <td mat-cell *matCellDef="let recordPermissionRequest">
                        <p>{{ recordPermissionRequest.record }}</p>
                    </td>
                </ng-container>
                <ng-container matColumnDef="requested">
                    <th mat-header-cell *matHeaderCellDef>Request Date</th>
                    <td mat-cell *matCellDef="let recordPermissionRequest">
                        <p>{{ (recordPermissionRequest.requested | date) }}</p>
                    </td>
                </ng-container>
                <ng-container matColumnDef="state">
                    <th mat-header-cell *matHeaderCellDef>State</th>
                    <td mat-cell *matCellDef="let recordPermissionRequest">
                        <p>{{ recordPermissionRequest.state }}</p>
                    </td>
                </ng-container>
                <ng-container matColumnDef="accept">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let recordPermissionRequest">
                        <button mat-button class="records-permit-requests__button__decline"
                                (click)="declineRequest(recordPermissionRequest)">Decline
                        </button>
                        <button mat-button class="records-permit-requests__button__accept"
                                (click)="permitRequest(recordPermissionRequest)">Accept
                        </button>
                    </td>
                </ng-container>
                <tr mat-header-row
                    *matHeaderRowDef="columns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: columns;"></tr>
            </table>

            <!--<table mat-table [dataSource]="(recordPermissionRequests | async | recordPermissionsProcessed)">-->


            <!--</table>-->
        </ng-container>
        <ng-template #noItems>No Items!</ng-template>
    </div>
    <ng-template #loading>loading animation...</ng-template>
</div>
